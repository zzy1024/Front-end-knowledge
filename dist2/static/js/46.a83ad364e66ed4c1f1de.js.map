{"version":3,"sources":["webpack:///./src/components/login/login.vue","webpack:///./src/components/login/login.vue?fd0b","webpack:///./src/components/login/login.vue?5178"],"names":["_axios_0_18_0_axios_default","a","defaults","withCredentials","login_login","name","created","_this","this","localUrl","tools","parseURL","window","location","href","url","console","log","getCookie","params","state","code","openUrl","get","then","res","status","$store","commit","data","setCookie","token","setTimeout","goBeforeLoginUrl","catch","error","methods","indexOf","$router","push","components","components_login_login","render","_h","$createElement","_self","_c","staticClass","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2IAQAA,EAAAC,EAAMC,SAASC,iBAAkB,EAAjCH,EAAAC,EAAMC,SAASC,iBAAkB,EAElB,IAAAC,GACbC,KAAM,QACNC,QAFa,WAEF,IAAAC,EAAAC,KAEHC,EAAWC,EAAA,EAAMC,SAASC,OAAOC,SAASC,MAC1CC,EAAM,uBAEZ,GADAC,QAAQC,IAAI,iBAAkBP,EAAA,EAAMQ,UAAU,WACzCR,EAAA,EAAMQ,UAAU,SACnB,GAAKT,EAASU,OAAOC,OAAUX,EAASU,OAAOE,KAGxC,CACL,IAAMA,EAAOZ,EAASU,OAAOE,KACvBD,EAAQX,EAASU,OAAOC,MACxBE,EAAUP,EAAM,sCAAwCM,EAAO,UAAYD,EACjFpB,EAAAC,EAAMsB,IAAID,GACPE,KAAK,SAACC,GACc,MAAfA,EAAIC,QACNV,QAAQC,IAAI,UAAWQ,GACvBlB,EAAKoB,OAAOC,OAAO,eAAgBH,EAAII,MACvCnB,EAAA,EAAMoB,UAAU,QAASL,EAAII,KAAKE,MAAO,KACzCC,WAAW,WACTzB,EAAK0B,oBACJ,KAEHrB,OAAOC,SAASC,KAAOC,EAAM,kCAGhCmB,MAAM,SAACC,GACNnB,QAAQC,IAAIkB,UAnBhBvB,OAAOC,SAASC,KAAOC,EAAM,iCA6CnCqB,SACEH,iBADO,WAEL,IAAIlB,EAAML,EAAA,EAAMQ,UAAU,kBAC1BF,QAAQC,IAAI,YACPF,IAAkC,IAA3BA,EAAIsB,QAAQ,WAGtB7B,KAAK8B,QAAQC,KAAKxB,GAClBL,EAAA,EAAMoB,UAAU,iBAAkB,KAHlCtB,KAAK8B,QAAQC,KAAK,OAyDxBC,eC5HaC,GADEC,OAFjB,WAA0B,IAAaC,EAAbnC,KAAaoC,eAAkD,OAA/DpC,KAAuCqC,MAAAC,IAAAH,GAAwB,OAAiBI,YAAA,WAEzFC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE/C,EACAqC,GATF,EAVA,SAAAW,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/46.a83ad364e66ed4c1f1de.js","sourcesContent":["//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport tools from '@/common/tools.js'\naxios.defaults.withCredentials = true\n\nexport default {\n  name: 'login',\n  created () {\n    // 检测会员有没有登录\n    const localUrl = tools.parseURL(window.location.href)\n    const url = 'http://api.lxplus.cn'\n    console.log('从cookies获取到的值：', tools.getCookie('token'))\n    if (!tools.getCookie('token')) {\n      if (!localUrl.params.state && !localUrl.params.code) {\n        // 跳转到微信授权页面\n        window.location.href = url + '/Mobile/MobileBase/login.html'\n      } else {\n        const code = localUrl.params.code\n        const state = localUrl.params.state\n        const openUrl = url + '/Mobile/MobileBase/login.html?code=' + code + '&state=' + state\n        axios.get(openUrl)\n          .then((res) => {\n            if (res.status === 200) {\n              console.log('登录回来的信息', res)\n              this.$store.commit('SET_USERDATE', res.data)\n              tools.setCookie('token', res.data.token, 100)\n              setTimeout(() => {\n                this.goBeforeLoginUrl() // 页面恢复(进入用户一开始请求的页面)\n              }, 60)\n            } else {\n              window.location.href = url + '/Mobile/MobileBase/login.html'\n            }\n          })\n          .catch((error) => {\n            console.log(error)\n          })\n      }\n    } else {\n      // 如果有token 但是vuex中没有用户登录信息则做登录操作\n      // this.login()\n    }\n\n   /* var res= this.parseURL(window.location.href)\n\n                      if(!res.params.code){\n                      setTimeout(function(){\n                          window.location.href = 'http://lulu.unietec.net/Mobile/Index/index.html'\n                      },4000);\n                      }else{\n                      console.log(res.params.code);\n                      var code =res.params.code;\n                             var state =res.params.state;\n                      setTimeout(function(){\n                                 axios('http://lulu.unietec.net/Mobile/Index/index.html?code='+code+'&state='+state);\n                              },4000);\n                              }\n\n    console.log(1, '我开始获取用户信息了')\n    this.checkCookie() */\n  },\n  methods: {\n    goBeforeLoginUrl () {\n      let url = tools.getCookie('beforeLoginUrl')\n      console.log('返回登录前url')\n      if (!url || url.indexOf('/login') !== -1) {\n        this.$router.push('/')\n      } else {\n        this.$router.push(url)\n        tools.setCookie('beforeLoginUrl', '')\n      }\n    }\n\n    /* goLogin: function () {\n      window.location.href = 'http://weishop.lxplus.cn/Mobile/Index/index.html'\n    },\n    getCookie: function (cname) {\n      let name = cname + '='\n      let ca = document.cookie.split(';')\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i]\n        while (c.charAt(0) === ' ') c = c.substring(1)\n        if (c.indexOf(name) !== -1) return c.substring(name.length, c.length)\n      }\n      return ''\n    },\n    checkCookie: function () {\n      let user = this.getCookie('is_mobile')\n      if (user !== '') {\n        console.log('已获取，用户名是： ' + user)\n      } else {\n        console.log('没有获取到用户信息： ' + user)\n      }\n    },\n    //解析URL各部分的通用方法\n        parseURL:function(url){\n            var a =  document.createElement('a');\n            a.href = url;\n            return {\n                source: url,\n                protocol: a.protocol.replace(':',''),\n                host: a.hostname,\n                port: a.port,\n                query: a.search,\n                params: (function(){\n                    var ret = {},\n                        seg = a.search.replace(/^\\?/,'').split('&'),\n                        len = seg.length, i = 0, s;\n                    for (;i<len;i++) {\n                        if (!seg[i]) { continue; }\n                        s = seg[i].split('=');\n                        ret[s[0]] = s[1];\n                    }\n                    return ret;\n                })(),\n                file: (a.pathname.match(/\\/([^\\/?#]+)$/i) || [,''])[1],\n                hash: a.hash.replace('#',''),\n                path: a.pathname.replace(/^([^\\/])/,'/$1'),\n                relative: (a.href.match(/tps?:\\/\\/[^\\/]+(.+)/) || [,''])[1],\n                segments: a.pathname.replace(/^\\//,'').split('/')\n            }\n        } */\n  },\n  components: {\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-11df99b8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-11df99b8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/style-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11df99b8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}