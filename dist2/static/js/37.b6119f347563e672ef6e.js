webpackJsonp([37],{"8htP":function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("mHYM"),i=e("aozt"),o=e.n(i),n=e("q4T2"),r=e("Wf59"),c=(n.a,r.a,{name:"applyreturn",data:function(){return{recId:"",allData:{},returnType:1,huowuPopStatus:!1,reasonPopStatus:!1,reason:0,chooseIndex:"reset",reasonIndex:"reset",is_receive:3,huowuzhuangtai:"请选择",reasonzhuangtai:"请选择",tuihuoTxtArr:["多拍/拍错/不喜欢/效果不好","质量问题","卖家发错货","未按约定时间发货","收到商品破损/少件/有污渍","其他"],src:"http://img1.vued.vanthink.cn/vued0a233185b6027244f9d43e653227439a.png",data:{},imgDataList:[],refund_money:"",describe:"",upimgArr:[]}},activated:function(){console.log("我是从新进来的1212121"),this.recId=this.$route.query.recId,this.returnType=this.$route.query.returnType,console.log(this.recId,this.returnType),this._getTuihuoData()},deactivated:function(){console.log("我走了"),this.allData={},this.reason=0,this.is_receive=3,this.chooseIndex="reset",this.reasonIndex="reset",this.huowuzhuangtai="请选择",this.reasonzhuangtai="请选择"},watch:{refund_money:function(s){if(!s)return this.refund_money="",!1;this.refund_money=s.match(/\d/gi)?s.match(/\d+\.?\d{0,2}/).join(""):""}},methods:{sendReturn:function(){var s=this;if(3==this.is_receive&&1==this.returnType)return a.a.showError("请选择货物状态"),!1;if(0==this.reason)return a.a.showError("请选择退款原因"),!1;if(console.log(this.refund_money),""==this.refund_money||this.refund_money<0||this.refund_money>this.allData.order_amount)return a.a.showError("退款金额需要大于0且不能超过该件商品实际支付的金额"),!1;o.a.post("/Mobile/Order/return_goods.html",{rec_id:this.recId,is_receive:this.is_receive,type:1==this.returnType?0:1,goods_num:this.allData.goods_num,reason:this.reason,describe:this.describe,order_id:this.allData.order_id,refund_money:this.refund_money,goods_id:this.allData.goods_id,spec_key:this.allData.spec_key,return_imgs:this.upimgArr}).then(function(t){console.log(t),1==t.data.status?(a.a.showError(t.data.msg),setTimeout(function(){s.$router.push({path:"orderdetail",query:{orderId:s.allData.order_id}})},2e3)):a.a.showError(t.data.msg)}).catch(function(s){console.log(s)})},getUploadImgArr:function(s){console.log("我是父元素打印出来的",s),this.upimgArr=s},delUploadImg:function(s){this.imgDataList.splice(s,1)},imageuploaded:function(s){console.log(s),"SUCCESS"==s.state&&this.imgDataList.push(s.url)},closedReasonPop:function(){if(0==this.reason)return a.a.showError("请选择退货原因"),!1;this.reasonPopStatus=!1,this.reasonzhuangtai=this.tuihuoTxtArr[this.reason-1]},changeReasonIndex:function(s){this.reasonIndex=s,this.reason=s,console.log("原因",this.reason)},selectGoodReason:function(){console.log(this.is_receive),2==this.returnType?(this.tuihuoTxtArr=["多拍/拍错/不喜欢/效果不好","质量问题","卖家发错货","未按约定时间发货","收到商品破损/少件/有污渍","其他"],this.reasonPopStatus=!0):1==this.returnType&&(0==this.is_receive?(this.tuihuoTxtArr=["多拍/拍错/不喜欢/不想要","快递无跟踪记录","未按约定时间发货","快递一直未送到","空包裹/少货","其他"],this.reasonPopStatus=!0):1==this.is_receive?(this.tuihuoTxtArr=["多拍/拍错/不喜欢/效果不好","质量问题","卖家发错货","未按约定时间发货","收到商品破损/少件/有污渍","其他"],this.reasonPopStatus=!0):3==this.is_receive&&1==this.returnType&&a.a.showError("请先选择货物状态"))},closedHuowuPop:function(){if(3==this.is_receive)return a.a.showError("请选择货物状态"),!1;this.huowuzhuangtai=0==this.is_receive?"未收到货":"已收到货",this.huowuPopStatus=!1,this.reasonzhuangtai="请选择",this.reason=0},changeYhqIndex:function(s){this.chooseIndex=s,this.is_receive=s,console.log(this.chooseIndex)},selectGoodStatus:function(){this.huowuPopStatus=!0},_getTuihuoData:function(){var s=this;o.a.get("/Mobile/Order/return_goods.html",{params:{rec_id:this.recId}}).then(function(t){console.log(t),1==t.data.status?(s.allData=t.data.data,s.refund_money=s.allData.order_amount):(a.a.showError(t.data.msg),setTimeout(function(){s.$router.go(-1)},2e3))}).catch(function(s){console.log(s)})}},components:{uploadimg:n.a,"vue-core-image-upload":r.a}}),u={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"applyretrun"},[e("div",{staticClass:"rg_top"},[e("img",{staticClass:"rg_img",attrs:{src:s.allData.img_path}}),s._v(" "),e("div",{staticClass:"rg_img_right"},[e("div",{staticClass:"sp_title",staticStyle:{"-webkit-box-orient":"vertical"}},[s._v(s._s(s.allData.goods_name))]),s._v(" "),e("p",{staticClass:"sp_guige"},[s._v(s._s(s.allData.spec_key_name))])])]),s._v(" "),e("div",{staticClass:"selectyy"},[e("ul",{staticClass:"lst_ul"},[1==s.returnType?e("li",{on:{click:s.selectGoodStatus}},[e("span",{staticClass:"lst_l"},[s._v("货物状态")]),s._v(" "),e("a",{staticClass:"lst_r"},[s._v(s._s(s.huowuzhuangtai)),e("i",{staticClass:"rightarrow"})])]):s._e(),s._v(" "),e("li",{on:{click:s.selectGoodReason}},[e("span",{staticClass:"lst_l"},[s._v("退款原因")]),s._v(" "),e("a",{staticClass:"lst_r"},[s._v(s._s(s.reasonzhuangtai)),e("i",{staticClass:"rightarrow"})])])])]),s._v(" "),e("div",{staticClass:"tuikuai_je"},[e("ul",[e("li",[e("span",[s._v("退款金额：")]),e("em",[s._v("￥")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.refund_money,expression:"refund_money"}],staticClass:"tuikuanjkjk",attrs:{type:"text"},domProps:{value:s.refund_money},on:{input:function(t){t.target.composing||(s.refund_money=t.target.value)}}})]),s._v(" "),e("li",[e("span",[s._v("退款说明：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.describe,expression:"describe"}],staticClass:"yuanyin",attrs:{type:"text",placeholder:"选填"},domProps:{value:s.describe},on:{input:function(t){t.target.composing||(s.describe=t.target.value)}}})])])]),s._v(" "),e("div",{staticClass:"upload_pz"},[e("h3",[s._v("上传凭证")]),s._v(" "),e("uploadimg",{on:{getUploadImgArr:s.getUploadImgArr}})],1),s._v(" "),e("div",{staticClass:"applybottom"},[e("a",{staticClass:"tijiaobtn",on:{click:s.sendReturn}},[s._v("提交")])]),s._v(" "),e("div",{staticClass:"canshupop",class:{canshupop_hover:s.huowuPopStatus}},[e("div",{staticClass:"maskPop",on:{click:function(t){s.huowuPopStatus=!1}}}),s._v(" "),e("div",{staticClass:"cspop_con"},[e("h4",{staticClass:"cspop_title"},[s._v("货物状态")]),s._v(" "),e("div",{ref:"cspopList",staticClass:"cspop_list"},[e("ul",{},[e("li",{staticClass:"clr",on:{click:function(t){s.changeYhqIndex(0)}}},[e("span",{staticClass:"cp_name"},[s._v("未收到货")]),e("em",{staticClass:"cs_zhi"},[e("i",{staticClass:"moni_checkbox",class:{moni_checkbox_on:0==s.chooseIndex}})])]),s._v(" "),e("li",{staticClass:"clr",on:{click:function(t){s.changeYhqIndex(1)}}},[e("span",{staticClass:"cp_name"},[s._v("已收到货")]),e("em",{staticClass:"cs_zhi"},[e("i",{staticClass:"moni_checkbox",class:{moni_checkbox_on:1==s.chooseIndex}})])])])]),s._v(" "),e("a",{staticClass:"cspop_sure",on:{click:s.closedHuowuPop}},[s._v("确定")])])]),s._v(" "),e("div",{staticClass:"canshupop",class:{canshupop_hover:s.reasonPopStatus}},[e("div",{staticClass:"maskPop",on:{click:function(t){s.reasonPopStatus=!1}}}),s._v(" "),e("div",{staticClass:"cspop_con"},[e("h4",{staticClass:"cspop_title"},[s._v("退款原因")]),s._v(" "),e("div",{ref:"cspopList",staticClass:"cspop_list"},[e("ul",{},s._l(s.tuihuoTxtArr,function(t,a){return e("li",{staticClass:"clr",on:{click:function(t){s.changeReasonIndex(a+1)}}},[e("span",{staticClass:"cp_name"},[s._v(s._s(t))]),e("em",{staticClass:"cs_zhi"},[e("i",{staticClass:"moni_checkbox",class:{moni_checkbox_on:s.reasonIndex==a+1}})])])}))]),s._v(" "),e("a",{staticClass:"cspop_sure",on:{click:s.closedReasonPop}},[s._v("确定")])])])])},staticRenderFns:[]};var l=e("C7Lr")(c,u,!1,function(s){e("wRTs")},null,null);t.default=l.exports},wRTs:function(s,t){}});
//# sourceMappingURL=37.b6119f347563e672ef6e.js.map