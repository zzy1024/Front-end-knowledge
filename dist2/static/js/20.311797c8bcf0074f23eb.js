webpackJsonp([20],{"+Tq7":function(s,t){},JgTr:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("ZLEe"),e=a.n(o),i=a("hZtR"),c=a("aozt"),n=a.n(c),r=a("mHYM"),d=a("9rMa"),l=(Object(d.b)(["addressData"]),{name:"confirmorder",data:function(){return{canshupopShow:!1,allData:{},yhqData:[],yhqTxt:"",yhqPrice:0,chooseIndex:"reset",nowYhqId:"",goodsFee:0,payables:0}},created:function(){},computed:Object(d.b)(["addressData"]),activated:function(){this.setBuyNowStatus(),this._getOrderData()},methods:{editAddress:function(){this.$router.push({path:"shipaddress",query:{type:"confirmorder"}})},gotoAddress:function(){this.$router.push({path:"addaddress",query:{type:"confirmorder"}})},setBuyNowStatus:function(){this.canshupopShow=!1},submitOrder:function(){var s=this;n.a.post("/Mobile/Cart/cart3.html",{coupon_id:this.nowYhqId,address_id:this.addressData.address_id,action:this.$route.query.action,act:"submit_order",goods_id:this.$route.query.goods_id,goods_num:this.$route.query.goods_num,item_id:this.$route.query.item_id}).then(function(t){if(console.log(t),1===t.data.status){var a=t.data.result.order_id;s.$router.push({path:"submitorder",query:{order_id:a}})}}).catch(function(s){console.log(s)})},closedPop:function(){var s=this;if("reset"===this.chooseIndex)this.canshupopShow=!1;else{n.a.post("/Mobile/Cart/cart3.html",{coupon_id:this.nowYhqId,action:this.$route.query.action,goods_id:this.$route.query.goods_id,goods_num:this.$route.query.goods_num,item_id:this.$route.query.item_id}).then(function(t){console.log(t),1==t.data.status?(s.goodsFee=t.data.result.goodsFee,s.payables=t.data.result.payables,s.yhqPrice=t.data.result.couponFee,s.yhqTxt=s.yhqData[s.chooseIndex].coupon.name,s.canshupopShow=!1):r.a.showError(t.data.msg)}).catch(function(s){console.log(s)})}},changeYhqIndex:function(s){this.chooseIndex===s?this.chooseIndex="reset":(this.chooseIndex=s,this.nowYhqId=this.yhqData[this.chooseIndex].id),console.log(this.chooseIndex)},_getOrderData:function(){var s=this;n.a.post("/Mobile/Cart/cart2.html",{goods_id:this.$route.query.goods_id,goods_num:this.$route.query.goods_num,item_id:this.$route.query.item_id,action:this.$route.query.action}).then(function(t){console.log(t),1===t.data.status?(s.allData=t.data,s.yhqData=t.data.userCartCouponList,s.goodsFee=s.payables=s.allData.cartPriceInfo.total_fee,console.log(s.$store.state.addressData),0!==e()(s.$store.state.addressData).length||(s.$store.commit("SET_ADDRESSDATA",t.data.address),console.log(s.$store.state)),s.yhqData.length<1?s.yhqTxt="无可用的优惠券":s.yhqTxt=s.yhqData.length+"张可用"):(r.a.showError(t.data.msg),s.$router.push({path:"shopcart"}))}).catch(function(s){console.log(s)})},openYhqPop:function(){var s=this;this.yhqData.length>0&&(this.canshupopShow=!0,setTimeout(function(){s._initGuiGeScroll()},20))},_initGuiGeScroll:function(){this.YhqScroll||(this.YhqScroll=new i.a(this.$refs.cspopList,{scrollY:!0,startY:0}))}},components:{}}),h={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return 0!==Object.keys(s.allData).length?a("div",{staticClass:"confirmorder"},[a("div",{staticClass:"dizhi"},[""!=s.allData.address?a("div",{staticClass:"dizhi_con clr",on:{click:s.editAddress}},[a("i",{staticClass:"dingwei"}),s._v(" "),a("i",{staticClass:"right_arrow"}),s._v(" "),a("div",{staticClass:"dizhi_info"},[a("div",{staticClass:"dizhi_ren clr"},[s._v("\n          收货人："),a("span",[s._v(s._s(s.addressData.consignee))]),s._v(" "),a("em",[s._v(s._s(s.addressData.mobile))])]),s._v(" "),a("p",{staticClass:"dizhi_address"},[s._v("收货地址: "+s._s(s.addressData.address))])])]):s._e(),s._v(" "),""==s.allData.address?a("div",{staticClass:"dizhi_noaddresss",on:{click:s.gotoAddress}},[a("i",{staticClass:"no_addresss"}),s._v("暂无地址，请先点击填写收货信息\n    ")]):s._e()]),s._v(" "),a("div",{staticClass:"sp_list"},[a("ul",s._l(s.allData.cartList,function(t){return a("li",{staticClass:"clr"},[a("img",{staticClass:"sp_img",attrs:{src:t.goods.img_path}}),s._v(" "),a("div",{staticClass:"sp_price"},[a("span",[s._v("￥"+s._s(s._f("quzheng")(t.goods_price)))]),s._v(" "),a("em",[s._v("x"+s._s(t.goods_num))])]),s._v(" "),a("div",{staticClass:"sp_info"},[a("div",{staticClass:"sp_title",staticStyle:{"-webkit-box-orient":"vertical"}},[s._v(s._s(t.goods_name))]),s._v(" "),a("p",[s._v(s._s(t.spec_key_name))])])])}))]),s._v(" "),a("div",{staticClass:"yhq"},[a("span",{staticClass:"yhq_name"},[s._v("优惠券")]),a("a",{staticClass:"yhq_lx",on:{click:s.openYhqPop}},[s._v(s._s(s.yhqTxt)),s.yhqData.length>0?a("i",{staticClass:"rightarrow"}):s._e()])]),s._v(" "),a("div",{staticClass:"order_all"},[a("ul",[a("li",[a("span",[s._v("商品金额")]),a("em",[s._v("￥"+s._s(s.goodsFee)+"元")])]),s._v(" "),s._m(0),s._v(" "),a("li",[a("span",[s._v("优惠券")]),a("em",[s._v("-￥"+s._s(s.yhqPrice)+"元")])])])]),s._v(" "),a("div",{staticClass:"orderfoot"},[a("a",{staticClass:"tijiao",on:{click:s.submitOrder}},[s._v("提交")]),s._v(" "),a("div",{staticClass:"apliy"},[s._v("应付金额："),a("span",[s._v("¥"+s._s(s.payables)+"元")])])]),s._v(" "),a("div",{staticClass:"canshupop",class:{canshupop_hover:s.canshupopShow}},[a("div",{staticClass:"maskPop",on:{click:function(t){s.canshupopShow=!1}}}),s._v(" "),a("div",{staticClass:"cspop_con"},[a("h4",{staticClass:"cspop_title"},[s._v("优惠券")]),s._v(" "),a("div",{ref:"cspopList",staticClass:"cspop_list"},[a("ul",{},s._l(s.yhqData,function(t,o){return a("li",{staticClass:"clr"},[a("span",{staticClass:"cp_name"},[s._v(s._s(t.coupon.name))]),a("em",{staticClass:"cs_zhi"},[a("input",{staticClass:"mui-checkbox",attrs:{disabled:o!=s.chooseIndex&&"reset"!=s.chooseIndex,type:"checkbox"},on:{click:function(t){s.changeYhqIndex(o)}}})])])}))]),s._v(" "),a("a",{staticClass:"cspop_sure",on:{click:s.closedPop}},[s._v("确定")])])])]):s._e()},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("li",[t("span",[this._v("运费")]),t("em",[this._v("￥0.00元")])])}]};var _=a("C7Lr")(l,h,!1,function(s){a("+Tq7")},null,null);t.default=_.exports}});
//# sourceMappingURL=20.311797c8bcf0074f23eb.js.map