webpackJsonp([31],{eBqA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mHYM"),i=a("aozt"),r=a.n(i),o=a("q4T2"),s=(o.a,{name:"uploadcert",data:function(){return{upimgArr:[],returnId:"",wuliuData:[],selectDataIndex:-1,shippingSn:"",telPhone:""}},watch:{telPhone:function(t){if(!t)return this.telPhone="",!1;this.telPhone=t.match(/\d/gi)?t.match(/\d/gi).join(""):""}},activated:function(){var t=this;this.returnId=this.$route.query.returnId,console.log(this.returnId),this.returnId||(n.a.showError("没有找到退款id，正在返回上一页"),setTimeout(function(){t.$router.go(-1)},1e3)),this._getWuliuData()},methods:{sendUploadCert:function(){var t=this;if(-1==this.selectDataIndex)return n.a.showError("请先选择物流公司"),!1;if(""==n.a.trim(this.shippingSn))return n.a.showError("请填写物流单号"),!1;if(!n.a.validMobileFormat(this.telPhone))return n.a.showError("请填写正确的手机号码"),!1;if(this.upimgArr.length<1)return n.a.showError("请上传至少一张凭证"),!1;r.a.post("/Mobile/Order/submit_express.html",{id:this.returnId,shipping_name:this.wuliuData[this.selectDataIndex].name,shipping_code:this.wuliuData[this.selectDataIndex].code,shipping_sn:this.shippingSn,refund_phone:this.telPhone,return_imgs:this.upimgArr}).then(function(e){console.log(e),1==e.data.status?(n.a.showError(e.data.msg),setTimeout(function(){t.$router.push({path:"refunddetails",query:{recId:t.returnId}})},1e3)):n.a.showError(e.data.msg)}).catch(function(t){console.log(t)})},getUploadImgArr:function(t){console.log("我是父元素打印出来的",t),this.upimgArr=t},_getWuliuData:function(){var t=this;r.a.get("/Mobile/Order/submit_express.html",{}).then(function(e){console.log(e),1==e.data.status?t.wuliuData=e.data.data:n.a.showError(e.data.msg)}).catch(function(t){console.log(t)})}},components:{uploadimg:o.a}}),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uploadcert"},[a("div",{staticClass:"tuikuai_je"},[a("ul",[a("li",[a("span",[t._v("物流公司：")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectDataIndex,expression:"selectDataIndex"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectDataIndex=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"-1"}},[t._v("请选择")]),t._v(" "),t._l(t.wuliuData,function(e,n){return a("option",{domProps:{value:n}},[t._v(t._s(e.name))])})],2)]),t._v(" "),a("li",[a("span",[t._v("物流单号：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shippingSn,expression:"shippingSn"}],staticClass:"tuikuanjkjk",attrs:{placeholder:"请填写物流单号",type:"text"},domProps:{value:t.shippingSn},on:{input:function(e){e.target.composing||(t.shippingSn=e.target.value)}}})]),t._v(" "),a("li",[a("span",[t._v("联系电话：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.telPhone,expression:"telPhone"}],staticClass:"tuikuanjkjk",attrs:{maxlength:"11",placeholder:"请填写手机号码",type:"text"},domProps:{value:t.telPhone},on:{input:function(e){e.target.composing||(t.telPhone=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"upload_pz"},[a("h3",[t._v("上传凭证")]),t._v(" "),a("uploadimg",{on:{getUploadImgArr:t.getUploadImgArr}})],1),t._v(" "),a("div",{staticClass:"tijiaocont"},[a("a",{staticClass:"tijiaobtn",on:{click:t.sendUploadCert}},[t._v("提交")])])])},staticRenderFns:[]};var l=a("C7Lr")(s,u,!1,function(t){a("opVD")},null,null);e.default=l.exports},opVD:function(t,e){}});
//# sourceMappingURL=31.7b03a99415d8194666f7.js.map