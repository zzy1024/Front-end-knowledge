webpackJsonp([43],{AfSD:function(t,a){},"W1+L":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("IHPB"),i=e.n(o),s=e("W3pG"),n=e("aozt"),c=e.n(n),r=(s.a,{name:"recommend",data:function(){return{busy:!0,allData:{},loadingShow:!1,noDataShow:!1,nowPage:1,totalPage:10,categoryId:0,flag:!0,liData:[],isDeactivated:!1,timer:null}},created:function(){this.$store.commit("LOADING_SHOW",!0),(this.$route.query.categoryId||0===this.$route.query.categoryId)&&(console.log("created阶段id：",this.$route.query.categoryId),this.categoryId=parseInt(this.$route.query.categoryId)),this._getData()},deactivated:function(){this.isDeactivated=!0,console.log("我被停用了",this.isDeactivated)},activated:function(){this.isDeactivated&&(this.busy=!1),this.isDeactivated=!1,console.log("我开始使用了",this.isDeactivated)},watch:{$route:function(t){"recommend"===t.name&&(this.categoryId===parseInt(this.$route.query.categoryId)||!this.$route.query.categoryId&&0!==this.$route.query.categoryId||(this.categoryId=parseInt(this.$route.query.categoryId),this._initCanshu(),this._getData()))}},methods:{goEquipDetail:function(t){this.$router.push({path:"equipdetails",query:{id:t}})},_getData:function(){var t=this;console.log(this.categoryId,this.nowPage),c.a.get("/Mobile/Equipment/recommend.html",{params:{catid:this.categoryId,p:this.nowPage}}).then(function(a){console.log(a),t.$store.commit("LOADING_SHOW",!1),200===a.status&&(t.allData=a.data,t.totalPage=t.allData.totalPages,t.liData=[].concat(i()(t.liData),i()(a.data.goods_list)),console.log(t.liData),t.flag?(t.flag=!1,t.busy=!1):(console.log("当前页数是：",t.nowPage,t.totalPage),t.nowPage>=t.totalPage?(t.busy=!0,t.loadingShow=!1,t.noDataShow=!0):t.busy=!1,t.isDeactivated&&(t.loadingShow=!1,t.busy=!0),t.loadingShow=!1))}).catch(function(t){console.log(t)})},loadMore:function(){var t=this;console.log("重复加载",this.busy),this.loadingShow=!0,this.busy=!0,this.timer=setTimeout(function(){t.nowPage++,t._getData()},1e3)},_initCanshu:function(){this.liData=[],this.busy=!0,this.nowPage=1,this.flag=!0,this.noDataShow=!1},changeCategoryId:function(t){this.liData=[],this.$router.push({path:"recommend",query:{categoryId:t}})}},components:{pubfooter:s.a}}),l={render:function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"recommend"},[o("div",{staticClass:"recom_fenlei"},[o("span",{class:{on:0===t.categoryId},on:{click:function(a){t.changeCategoryId(0)}}},[t._v("全部")]),t._l(t.allData.goodsCategory,function(a){return o("span",{key:a.id,class:{on:a.id==t.categoryId},on:{click:function(e){t.changeCategoryId(a.id)}}},[t._v(t._s(a.mobile_name))])})],2),t._v(" "),o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"recom_list",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"50"}},t._l(t.liData,function(a,e){return o("div",{key:a.goods_id,staticClass:"recom_node",on:{click:function(e){t.goEquipDetail(a.goods_id)}}},[o("h3",{staticClass:"recom_title"},[t._v(t._s(a.goods_name))]),t._v(" "),o("div",{staticClass:"recom_tag"},[o("span",{staticClass:"flxc"},[o("i"),t._v(t._s(a.cat_name))]),o("span",{staticClass:"dd"},[o("i"),t._v(t._s(a.country_name))])]),t._v(" "),o("p",{staticClass:"recom_info",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(a.goods_content))]),t._v(" "),o("div",{staticClass:"recom_img clr"},t._l(t.liData[e].goods_images,function(t,a){return o("div",{key:a,staticClass:"recom_img_list"},[o("img",{attrs:{src:t.img_path}})])})),t._v(" "),o("div",{staticClass:"recom_foot"},[o("span",[t._v(t._s(a.click_count)+"人感兴趣")]),t._v(" "),o("em",[t._v(t._s(a.sales_sum)+"人付款")])])])})),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],staticClass:"list_load"},[o("img",{attrs:{src:e("t3LQ")}}),t._v("数据加载中...\n  ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.noDataShow,expression:"noDataShow"}],staticClass:"list_load"},[t._v("\n    没有更多数据了\n  ")]),t._v(" "),o("pubfooter",{attrs:{indexNum:2}})],1)},staticRenderFns:[]};var d=e("C7Lr")(r,l,!1,function(t){e("AfSD")},null,null);a.default=d.exports}});
//# sourceMappingURL=43.9d21495f9f48cede08d7.js.map