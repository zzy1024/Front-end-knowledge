webpackJsonp([16],{"+J2O":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("aozt"),n=o.n(s),i=o("mHYM"),r={name:"bindphone",data:function(){return{telPhone:"",yzm:"",openGetYzm:!1,isSending:!1,isShowError:!1,yzmTxt:"获取验证码",djsTime:null,djsNum:10,errortxt:""}},watch:{telPhone:function(e){if(!e)return this.telPhone="",!1;this.telPhone=e.match(/\d/gi)?e.match(/\d/gi).join(""):"",i.a.validMobileFormat(this.telPhone)?this.openGetYzm=!0:this.openGetYzm=!1}},methods:{getYzm:function(){var e=this;if(this.openGetYzm){this.openGetYzm=!1;n.a.post("/Mobile/User/smscode.html",{mobile:this.telPhone}).then(function(t){if(200===t.status){i.a.showError("验证码发送成功");var o=e.djsNum;e.djsTime=setInterval(function(){if(0===--o)return clearInterval(e.djsTime),e.djsTime=null,e.openGetYzm=!0,e.yzmTxt="重新发送",!1;e.yzmTxt=o+"秒后重新发送"},1e3)}}).catch(function(e){console.log(e)})}},setPhone:function(){var e=this;if(i.a.validMobileFormat(this.telPhone))if(""!==this.yzm){n.a.post("/Mobile/User/userinfo.html",{mobile:this.telPhone,mobile_code:this.yzm}).then(function(t){1===t.data.status?(console.log("设置手机号",t),i.a.showError(t.data.msg),e.$store.commit("MODIFY_TELPHONE",e.telPhone),e.$router.push({path:"accountset"})):i.a.showError(t.data.msg)}).catch(function(e){console.log(e)})}else i.a.showError("请填写验证码");else i.a.showError("请填写手机号")}}},a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bindphone"},[o("div",{staticClass:"bindcont"},[o("ul",{staticClass:"bind_list"},[o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.telPhone,expression:"telPhone"}],staticClass:"txt",attrs:{type:"text",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:e.telPhone},on:{input:function(t){t.target.composing||(e.telPhone=t.target.value)}}})]),e._v(" "),o("li",[o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.yzm,expression:"yzm",modifiers:{number:!0}}],staticClass:"txt",attrs:{type:"number",placeholder:"请输入短信验证码"},domProps:{value:e.yzm},on:{input:function(t){t.target.composing||(e.yzm=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),o("span",{staticClass:"getyzm",class:{yzmisopen:e.openGetYzm},on:{click:e.getYzm}},[e._v(e._s(e.yzmTxt))])])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowError,expression:"isShowError"}],staticClass:"errortips"},[e._v("*"+e._s(e.errortxt))])]),e._v(" "),o("a",{staticClass:"sure_btn",on:{click:e.setPhone}},[e._v("确定")])])},staticRenderFns:[]};var l=o("C7Lr")(r,a,!1,function(e){o("CR0W")},null,null);t.default=l.exports},CR0W:function(e,t){}});
//# sourceMappingURL=16.db7c73f0946a4bcd3829.js.map