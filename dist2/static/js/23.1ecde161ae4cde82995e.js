webpackJsonp([23],{"3oCI":function(o,e){},dC3Z:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("IHPB"),n=t.n(a),i=t("W3pG"),s=t("evCZ"),r=t("mHYM"),c=t("aozt"),l=t.n(c),d=t("JGLT"),h=t("jHHs"),_=t("Jp5S"),v=(_.a,i.a,s.a,d.a,h.a,{name:"myorder",data:function(){return{totalPage:1,allData:[],confirmShow:!1,nowOrderId:0,confirmShowCancel:!1,nowIndex:0,confirmShowReceive:!1,nowType:"",nowPage:1,busy:!1,loadingShow:!1,noDataShow:!1,noDataPopShow:!0,isPaying:!1}},created:function(){this.nowType=this.$route.query.type,this._getOrderData()},watch:{$route:function(o,e){"myorder"===o.name&&(console.log("路由变化了",this.$route.query.type),this.nowType=this.$route.query.type,this.reSetGetData(),this._getOrderData())}},directives:{TransferDom:_.a},methods:{goToPayBtn:function(o){var e=this.allData[o].order_id;this.$refs.weixinPay.goToPay(e)},loadMore:function(){var o=this;console.log("重复加载",this.busy),this.busy=!0,this.loadingShow=!0,this.timer=setTimeout(function(){o.nowPage++,o._getOrderData()},1e3)},toAssess:function(o){this.$router.push({path:"gotoassess",query:{orderId:this.allData[o].order_id}})},seeWuliu:function(o){this.$router.push({path:"queryexpress",query:{orderId:this.allData[o].order_id}})},changeType:function(o){this.nowType=o,this.reSetGetData(),this.$router.push({path:"myorder",query:{type:this.nowType}})},reSetGetData:function(){this.nowPage=1,this.allData=[],this.loadingShow=!1,this.noDataShow=!1,this.busy=!0,this.totalPage=1},onCancelReceive:function(){this.confirmShowReceive=!1},onConfirmReceive:function(){var o=this;console.log("我要开始确认收货了");l.a.get("/Mobile/Order/order_confirm.html",{params:{id:this.nowOrderId}}).then(function(e){console.log(e),1==e.data.status?(o.confirmShowReceive=!1,o.allData.splice(o.nowIndex,1),r.a.showError(e.data.msg)):r.a.showError(e.data.msg)}).catch(function(o){console.log(o)})},receiveOrder:function(o){this.nowOrderId=this.allData[o].order_id,this.confirmShowReceive=!0,this.nowIndex=o},onConfirmCancel:function(){var o=this;console.log("我要开始取消订单了");l.a.get("/Mobile/Order/cancel_order.html",{params:{id:this.nowOrderId}}).then(function(e){console.log(e),1==e.data.status?(o.confirmShowCancel=!1,o.allData.splice(o.nowIndex,1),r.a.showError(e.data.msg)):r.a.showError(e.data.msg)}).catch(function(o){console.log(o)})},onCancelCancel:function(){this.confirmShowCancel=!1},cancelOrder:function(o){this.nowOrderId=this.allData[o].order_id,this.confirmShowCancel=!0,this.nowIndex=o},onConfirm:function(){var o=this;console.log("我要开始删除了");l.a.get("/Mobile/Order/delete_order.html",{params:{id:this.nowOrderId}}).then(function(e){console.log(e),1==e.data.status?(o.confirmShow=!1,o.allData.splice(o.nowIndex,1),r.a.showError(e.data.msg)):r.a.showError(e.data.msg)}).catch(function(o){console.log(o)})},onCancel:function(){this.confirmShow=!1},delOrder:function(o){this.nowOrderId=this.allData[o].order_id,this.confirmShow=!0,this.nowIndex=o},gotoOrderDetails:function(o){this.$router.push({path:"orderdetail",query:{orderId:o}})},_getOrderData:function(){var o=this;console.log(1);l.a.get("/Mobile/Order/order_list.html",{params:{type:this.nowType,p:this.nowPage}}).then(function(e){console.log(e),1==e.data.status?(o.allData=[].concat(n()(o.allData),n()(e.data.order_list)),o.totalPage=e.data.totalPages,console.log(o.allData,o.allData.length),o.allData.length>0?o.noDataPopShow=!1:o.noDataPopShow=!0,console.log("当前页：",o.nowPage,o.totalPage),o.nowPage>=o.totalPage?(o.busy=!0,o.noDataShow=!0,o.loadingShow=!1):o.busy=!1):r.a.showError(e.data.msg)}).catch(function(o){console.log(o)})}},components:{pubfooter:i.a,weixinpay:s.a,Confirm:d.a,XDialog:h.a}}),u={render:function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"myorder"},[o.noDataPopShow?a("div",{staticClass:"nodata"},[a("img",{attrs:{src:t("xXKw")}}),o._v(" "),a("h3",[o._v("您还没有相关的订单")]),o._v(" "),a("p",[o._v("去挑选合适的宝贝")]),o._v(" "),a("router-link",{staticClass:"goother",attrs:{tag:"a",to:"/",exact:""}},[o._v("去逛逛")])],1):o._e(),o._v(" "),a("div",{staticClass:"order_name"},[a("ul",{staticClass:"clr"},[a("li",{class:{on:"ALL"===o.nowType},on:{click:function(e){o.changeType("ALL")}}},[o._v("全部")]),o._v(" "),a("li",{class:{on:"WAITPAY"===o.nowType},on:{click:function(e){o.changeType("WAITPAY")}}},[o._v("待支付")]),o._v(" "),a("li",{class:{on:"WAITSEND"===o.nowType},on:{click:function(e){o.changeType("WAITSEND")}}},[o._v("待发货")]),o._v(" "),a("li",{class:{on:"WAITRECEIVE"===o.nowType},on:{click:function(e){o.changeType("WAITRECEIVE")}}},[o._v("待收货")]),o._v(" "),a("li",{class:{on:"WAITCCOMMENT"===o.nowType},on:{click:function(e){o.changeType("WAITCCOMMENT")}}},[o._v("待评价")])])]),o._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:o.loadMore,expression:"loadMore"}],staticClass:"orderlist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"20"}},[o._l(o.allData,function(e,t){return a("div",{staticClass:"ordernode"},[a("ul",o._l(e.goods_list,function(e){return a("li",{staticClass:"clr",on:{click:function(t){o.gotoOrderDetails(e.order_id)}}},[a("img",{staticClass:"orderimg",attrs:{src:e.img_path}}),o._v(" "),a("div",{staticClass:"sp_price"},[a("span",[o._v("￥"+o._s(e.goods_price))]),o._v(" "),a("p",{staticClass:"oldprece"},[o._v("￥"+o._s(e.market_price))]),o._v(" "),a("em",[o._v("x"+o._s(e.goods_num))]),o._v(" "),a("p",{staticClass:"tk_tips"},[o._v(o._s(e.status))])]),o._v(" "),a("div",{staticClass:"sp_info"},[a("div",{staticClass:"sp_title",staticStyle:{"-webkit-box-orient":"vertical"}},[o._v(o._s(e.goods_name))]),o._v(" "),a("p",[o._v(o._s(e.spec_key_name))])])])})),o._v(" "),a("div",{staticClass:"spcont clr"},[a("div",{staticClass:"sp_l"},[a("p",[o._v("共"+o._s(e.count_goods_num)+"件商品")]),o._v(" "),a("p",[o._v("应付："),a("em",[o._v("￥"+o._s(e.order_amount))])])]),o._v(" "),a("div",{staticClass:"sp_r"},[a("p",[o._v("下单时间: "+o._s(e.add_time))]),o._v(" "),a("em",[o._v(o._s(e.order_status_desc))])])]),o._v(" "),"WAITSEND"!==e.order_status_code?a("div",{staticClass:"btncont"},[1==e.cancel_btn?a("a",{on:{click:function(e){o.cancelOrder(t)}}},[o._v("取消订单")]):o._e(),o._v(" "),1==e.shipping_btn?a("a",{on:{click:function(e){o.seeWuliu(t)}}},[o._v("查看物流")]):o._e(),o._v(" "),1==e.comment_btn?a("a",{on:{click:function(e){o.toAssess(t)}}},[o._v("评价")]):o._e(),o._v(" "),1==e.delete_btn?a("a",{on:{click:function(e){o.delOrder(t)}}},[o._v("删除订单")]):o._e(),o._v(" "),1==e.receive_btn?a("a",{staticClass:"btn_red",on:{click:function(e){o.receiveOrder(t)}}},[o._v("确认收货")]):o._e(),o._v(" "),1==e.pay_btn?a("a",{staticClass:"btn_red",on:{click:function(e){o.goToPayBtn(t)}}},[o._v("付款")]):o._e()]):o._e()])}),o._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("confirm",{attrs:{title:"确认删除订单？"},on:{"on-confirm":o.onConfirm,"on-cancel":o.onCancel},model:{value:o.confirmShow,callback:function(e){o.confirmShow=e},expression:"confirmShow"}},[a("p",{staticStyle:{"text-align":"center"}},[o._v("删除订单之后无法恢复，无法处理您的售后问题，请慎重考虑")])])],1),o._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("confirm",{attrs:{title:"确认取消订单？"},on:{"on-confirm":o.onConfirmCancel,"on-cancel":o.onCancelCancel},model:{value:o.confirmShowCancel,callback:function(e){o.confirmShowCancel=e},expression:"confirmShowCancel"}},[a("p",{staticStyle:{"text-align":"center"}},[o._v("订单一旦取消，无法恢复，优惠券将原路返还")])])],1),o._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("confirm",{attrs:{title:"订单确认收货？"},on:{"on-confirm":o.onConfirmReceive,"on-cancel":o.onCancelReceive},model:{value:o.confirmShowReceive,callback:function(e){o.confirmShowReceive=e},expression:"confirmShowReceive"}},[a("p",{staticStyle:{"text-align":"center"}},[o._v("订单一旦确认收货，7天后将无法退换货")])])],1),o._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:o.loadingShow,expression:"loadingShow"}],staticClass:"list_load"},[a("img",{attrs:{src:t("t3LQ")}}),o._v("数据加载中...\n    ")]),o._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:o.noDataShow,expression:"noDataShow"}],staticClass:"list_load"},[o._v("\n      没有更多数据了\n    ")])],2),o._v(" "),a("weixinpay",{ref:"weixinPay"}),o._v(" "),a("pubfooter",{attrs:{indexNum:4}})],1)},staticRenderFns:[]};var f=t("C7Lr")(v,u,!1,function(o){t("3oCI")},null,null);e.default=f.exports}});
//# sourceMappingURL=23.1ecde161ae4cde82995e.js.map