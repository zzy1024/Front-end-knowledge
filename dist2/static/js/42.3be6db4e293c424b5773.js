webpackJsonp([42],{KfZe:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("ZLEe"),n=a.n(i),e=a("IHPB"),o=a.n(e),c=a("W3pG"),l=a("mHYM"),m=a("aozt"),_=a.n(m),d=(c.a,{name:"assessdetails",data:function(){return{commentType:1,nowPage:1,itemId:0,allData:{},commonList:[],loadingShow:!1,noDataShow:!1,busy:!0,totalPage:1,commentStatistics:{}}},activated:function(){this.itemId=this.$route.query.itemId,this.commentStatistics={},this._getAssessData()},deactivated:function(){this.$destroy()},methods:{loadMore:function(){var t=this;console.log("重复加载",this.busy),this.loadingShow=!0,this.busy=!0,this.timer=setTimeout(function(){t.nowPage++,t._getAssessData()},1e3)},changeCommentType:function(t){this.commentType=t,this.reSetGetData(),this._getAssessData()},reSetGetData:function(){this.nowPage=1,this.allData={},this.commonList=[],this.loadingShow=!1,this.noDataShow=!1,this.busy=!0,this.totalPage=1},_getAssessData:function(){var t=this;_.a.get("/Mobile/Goods/comment.html",{params:{p:this.nowPage,id:this.itemId,commentType:this.commentType}}).then(function(s){console.log(s),200===s.status&&(t.allData=s.data,t.commonList=[].concat(o()(t.commonList),o()(s.data.comment)),t.totalPage=s.data.totalpage,0==n()(t.commentStatistics).length&&(t.commentStatistics=s.data.commentStatistics),console.log("当前页：",t.nowPage,t.totalPage),t.nowPage>=t.totalPage?(t.busy=!0,t.loadingShow=!1,t.noDataShow=!0):t.busy=!1)}).catch(function(t){console.log(t)})},dianZan:function(t,s){var a=this;console.log(t,s);_.a.get("/Mobile/Goods/zan_goods.html",{params:{comment_id:s}}).then(function(s){console.log(s),200===s.status&&(1===s.data.success?a.commonList[t].iszan=1:a.commonList[t].iszan=0,a.commonList[t].zan_num=s.data.data,l.a.showError(s.data.msg))}).catch(function(t){console.log(t)})}},components:{pubfooter:c.a}}),v={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"assessdetails"},[0!==Object.keys(t.commentStatistics).length?i("div",{staticClass:"assess_fl_list"},[i("div",{staticClass:"fl_list_div",class:{on:1===t.commentType},on:{click:function(s){t.changeCommentType(1)}}},[t._v("全部评价"),i("p",{staticClass:"num"},[t._v(t._s(t.commentStatistics.c0))])]),t._v(" "),i("div",{staticClass:"fl_list_div",class:{on:2===t.commentType},on:{click:function(s){t.changeCommentType(2)}}},[t._v("好评"),i("p",{staticClass:"num"},[t._v(t._s(t.commentStatistics.c1))])]),t._v(" "),i("div",{staticClass:"fl_list_div",class:{on:3===t.commentType},on:{click:function(s){t.changeCommentType(3)}}},[t._v("中评"),i("p",{staticClass:"num"},[t._v(t._s(t.commentStatistics.c2))])]),t._v(" "),i("div",{staticClass:"fl_list_div",class:{on:4===t.commentType},on:{click:function(s){t.changeCommentType(4)}}},[t._v("差评"),i("p",{staticClass:"num"},[t._v(t._s(t.commentStatistics.c3))])]),t._v(" "),i("div",{staticClass:"fl_list_div",class:{on:5===t.commentType},on:{click:function(s){t.changeCommentType(5)}}},[t._v("有图"),i("p",{staticClass:"num"},[t._v(t._s(t.commentStatistics.c4))])])]):t._e(),t._v(" "),i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"pjcont",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"20"}},t._l(t.commonList,function(s,a){return i("div",{staticClass:"pj_list"},[i("div",{staticClass:"pj_name"},[i("img",{attrs:{src:s.head_img}}),i("span",[t._v(t._s(s.username))])]),t._v(" "),i("div",{staticClass:"pj_time"},[t._v(t._s(s.add_time))]),t._v(" "),i("div",{staticClass:"pj_cont"},[t._v("\n        "+t._s(s.content)+"\n      ")]),t._v(" "),s.img?i("div",{staticClass:"pj_img"},[i("ul",{staticClass:"clr"},t._l(s.img,function(t){return i("li",[i("img",{attrs:{src:t}})])}))]):t._e(),t._v(" "),s.replycontent?i("div",{staticClass:"pj_huifu"},[i("i",{staticClass:"pj_sanjiao"}),t._v(" "),i("div",{staticClass:"pj_hfcon"},[t._v("\n          商家回复："+t._s(s.replycontent)+"\n        ")])]):t._e(),t._v(" "),i("div",{staticClass:"pj_liulan clr"},[i("a",{staticClass:"pj_zan",class:{pj_zaned:1===s.iszan},on:{click:function(i){t.dianZan(a,s.comment_id)}}},[i("i"),t._v(t._s(0==s.zan_num?"点赞":s.zan_num))])])])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],staticClass:"list_load"},[i("img",{attrs:{src:a("t3LQ")}}),t._v("数据加载中...\n  ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.noDataShow,expression:"noDataShow"}],staticClass:"list_load"},[t._v("\n    没有更多数据了\n  ")]),t._v(" "),i("pubfooter",{attrs:{indexNum:1}})],1)},staticRenderFns:[]};var r=a("C7Lr")(d,v,!1,function(t){a("vrZb")},null,null);s.default=r.exports},vrZb:function(t,s){}});
//# sourceMappingURL=42.3be6db4e293c424b5773.js.map