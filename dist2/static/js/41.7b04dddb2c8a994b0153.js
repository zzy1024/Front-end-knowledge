webpackJsonp([41],{baKV:function(t,a,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=o("IHPB"),s=o.n(n),e=o("aozt"),i=o.n(e),c=o("mHYM"),l={name:"coupon",data:function(){return{type:0,couponData:[],allData:{},totalPage:1,loadingShow:!1,noDataShow:!1,noDataPopShow:!1,nowPage:1,busy:!0}},activated:function(){this.resetData(),this._getCouponData()},methods:{loadMore:function(){var t=this;console.log("重复加载",this.busy),this.busy=!0,this.loadingShow=!0,this.timer=setTimeout(function(){t.nowPage++,t._getCouponData()},1e3)},changeType:function(t){if(this.type==t)return!1;this.resetData(),this.type=t,this._getCouponData()},resetData:function(){this.totalPage=0,this.nowPage=1,this.busy=!0,this.couponData=[],this.allData={},this.loadingShow=!1,this.noDataShow=!1,this.noDataPopShow=!1},_getCouponData:function(){var t=this;i.a.get("/Mobile/User/coupon.html",{params:{type:this.type,page:this.nowPage}}).then(function(a){console.log(a),1==a.data.status?(t.totalPage=a.data.totalPages,t.allData=a.data,t.couponData=[].concat(s()(t.couponData),s()(a.data.coupon_list)),t.couponData.length>0?t.noDataPopShow=!1:t.noDataPopShow=!0,console.log("页数",t.nowPage,t.totalPage),t.nowPage>=t.totalPage?(t.busy=!0,t.noDataShow=!0,t.loadingShow=!1):t.busy=!1):c.a.showError(a.data.msg)}).catch(function(t){console.log(t)})}}},u={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"coupon"},[t.allData.count?n("div",{staticClass:"coupon_title"},[n("a",{class:{on:0==t.type},on:{click:function(a){t.changeType(0)}}},[t._v("有效优惠券("+t._s(t.allData.count.nouseCount)+")")]),t._v(" "),n("a",{class:{on:1==t.type},on:{click:function(a){t.changeType(1)}}},[t._v("已使用优惠券("+t._s(t.allData.count.usedCount)+")")]),t._v(" "),n("a",{class:{on:2==t.type},on:{click:function(a){t.changeType(2)}}},[t._v("已失效优惠券("+t._s(t.allData.count.overusedCount)+")")])]):t._e(),t._v(" "),t.noDataPopShow?n("div",{staticClass:"nodata"},[n("img",{attrs:{src:o("xXKw")}}),t._v(" "),n("h3",[t._v("您还没有相关的优惠券")]),t._v(" "),n("p",[t._v("去挑选合适的宝贝")]),t._v(" "),n("router-link",{staticClass:"goother",attrs:{tag:"a",to:"/",exact:""}},[t._v("去逛逛")])],1):t._e(),t._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"coupon_div",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"20"}},[n("ul",t._l(t.couponData,function(a){return n("li",{staticClass:"clr",class:{couponused:1==t.type||2==t.type}},[n("img",{staticClass:"coupon_img",attrs:{src:a.img_path}}),t._v(" "),n("div",{staticClass:"coupon_info"},[n("h3",[t._v(t._s(a.name))]),t._v(" "),n("p",[t._v(t._s(a.use_start_time)+" - "+t._s(a.use_end_time))])]),t._v(" "),n("div",{staticClass:"coupon_money"},[n("h2",[t._v("￥"),n("span",[t._v(t._s(t._f("quzheng")(a.money)))])]),t._v(" "),n("p",[t._v("满"+t._s(t._f("quzheng")(a.condition))+"使用")])])])}))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],staticClass:"list_load"},[n("img",{attrs:{src:o("t3LQ")}}),t._v("数据加载中...\n  ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.noDataShow,expression:"noDataShow"}],staticClass:"list_load"},[t._v("\n    没有更多数据了\n  ")])])},staticRenderFns:[]};var r=o("C7Lr")(l,u,!1,function(t){o("fpa5")},null,null);a.default=r.exports},fpa5:function(t,a){}});
//# sourceMappingURL=41.7b04dddb2c8a994b0153.js.map