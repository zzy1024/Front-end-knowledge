webpackJsonp([39],{cD1A:function(s,t){},"hh/R":function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("IHPB"),i=a.n(o),e=a("W3pG"),c=a("aozt"),r=a.n(c),n=(e.a,{name:"searchresult",data:function(){return{loadingShow:!1,busy:!0,nowPage:1,keyword:null,categoryId:0,allData:{},isNoData:!1,noDataShow:!1,imgData:[],baoyou:0,zonghe:0,sort:"",sort_sc:"",smallListName:"zonghe",isClickPrice:!0}},created:function(){this.$route.query.keyword?(this.keyword=this.$route.query.keyword,this.categoryId=parseInt(this.$route.query.category),console.log("我是刚进来时的",this.keyword,this.categoryId),this._getData()):this.$router.push({path:"search"})},deactivated:function(){this.$destroy()},watch:{$route:function(s,t){"searchresult"===s.name&&(console.log("路由监听到了"),this.keyword=this.$route.query.keyword,this.categoryId=this.$route.query.category,this.keyword&&this._getData())}},methods:{loadMore:function(){var s=this;console.log("重复加载",this.busy),this.loadingShow=!0,this.busy=!0,setTimeout(function(){s.nowPage++,s._getData()},1e3)},changeCategoryId:function(s){this.categoryId=s,this.nowPage=1,this.imgData=[],this.baoyou=0,this.sort="",this.sort_sc="",this.isClickPrice=!0,this.nowPage=1,this.smallListName="zonghe",this.changeRouter()},changeSort:function(s){switch(console.log(s),this.imgData=[],this.smallListName=s,s){case"post":this.baoyou=1,this.sort="",this.sort_sc="",this.isClickPrice=!0,this.nowPage=1;break;case"zonghe":this.baoyou=0,this.sort="",this.sort_sc="",this.isClickPrice=!0,this.nowPage=1;break;case"sales_sum":this.baoyou=0,this.sort="sales_sum",this.sort_sc="desc",this.isClickPrice=!0,this.nowPage=1;break;case"shop_price":this.nowPage=1,this.isClickPrice?(this.baoyou=0,this.sort="shop_price",this.sort_sc="asc",this.isClickPrice=!1):(this.baoyou=0,this.sort="shop_price",this.sort_sc="desc",this.isClickPrice=!0)}this._getData()},changeRouter:function(){this.$router.push({path:"searchresult",query:{category:this.categoryId,keyword:this.keyword}})},_getData:function(){var s=this;console.log(this.categoryId,this.nowPage),r.a.get("/Mobile/Search/dosearch.html",{params:{keyword:this.keyword,p:this.nowPage,category:this.categoryId,post:this.baoyou,sort:this.sort,sort_sc:this.sort_sc}}).then(function(t){console.log(t),s.$store.commit("LOADING_SHOW",!1),200===t.status&&(s.allData=t.data,s.totalPage=s.allData.totalPages,s.imgData=[].concat(i()(s.imgData),i()(t.data.goods_list)),console.log("1234",!s.totalPage),s.totalPage?(s.isNoData=!1,s.busy=!1,s.noDataShow=!1,s.loadingShow=!1,s.nowPage>=s.totalPage&&(s.busy=!0,s.loadingShow=!1,s.noDataShow=!0)):(s.isNoData=!0,s.busy=!0,s.noDataShow=!0))}).catch(function(s){console.log(s)})},goEquipDetail:function(s){this.$router.push({path:"equipdetails",query:{id:s}})}},components:{pubfooter:e.a}}),l={render:function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"searchresult"},[o("router-link",{staticClass:"search_srk clr",attrs:{tag:"div",to:"/search",exact:""}},[o("input",{attrs:{placeholder:"美国游学"},domProps:{value:s.keyword}}),o("span",[s._v("取消")])]),s._v(" "),o("div",{staticClass:"big_fl"},[o("ul",{staticClass:"clr"},[o("li",{class:{on:0===s.categoryId},on:{click:function(t){s.changeCategoryId(0)}}},[s._v("全部")]),s._v(" "),o("li",{class:{on:844===s.categoryId},on:{click:function(t){s.changeCategoryId(844)}}},[s._v("游学")]),s._v(" "),o("li",{class:{on:848===s.categoryId},on:{click:function(t){s.changeCategoryId(848)}}},[s._v("留学")]),s._v(" "),o("li",{class:{on:849===s.categoryId},on:{click:function(t){s.changeCategoryId(849)}}},[s._v("签证")]),s._v(" "),o("li",{class:{on:850===s.categoryId},on:{click:function(t){s.changeCategoryId(850)}}},[s._v("周边产品")])])]),s._v(" "),o("div",{staticClass:"small_fl"},[o("ul",{staticClass:"clr"},[o("li",{class:{on:"zonghe"===s.smallListName},on:{click:function(t){s.changeSort("zonghe")}}},[s._v("综合")]),s._v(" "),o("li",{class:{on:"sales_sum"===s.smallListName},on:{click:function(t){s.changeSort("sales_sum")}}},[s._v("销量")]),s._v(" "),o("li",{class:{on:"shop_price"===s.smallListName},on:{click:function(t){s.changeSort("shop_price")}}},[s._v("价格"),o("i",{class:{price_up:!s.isClickPrice}})]),s._v(" "),o("li",{class:{on:"post"===s.smallListName},on:{click:function(t){s.changeSort("post")}}},[s._v("包邮")])])]),s._v(" "),s.isNoData?o("div",{staticClass:"noanying"},[o("i",{staticClass:"no"}),s._v(" "),o("div",[s._v("很抱歉！没有搜索到相关信息")]),s._v(" "),o("p",[s._v("为您推荐了以下热门产品")])]):s._e(),s._v(" "),o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:s.loadMore,expression:"loadMore"}],staticClass:"search_list",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"50"}},[o("ul",s._l(s.imgData,function(t){return o("li",{staticClass:"clr",on:{click:function(a){s.goEquipDetail(t.goods_id)}}},[o("img",{staticClass:"search_img",attrs:{src:t.goods_images}}),s._v(" "),o("div",{staticClass:"search_right"},[o("h3",{staticStyle:{"-webkit-box-orient":"vertical"}},[s._v(s._s(t.goods_name))]),s._v(" "),o("div",{staticClass:"search_tag"}),s._v(" "),o("div",{staticClass:"search_price clr"},[o("span",{staticClass:"nowprice"},[s._v("￥"+s._s(s._f("quzheng")(t.shop_price)))]),o("em",{staticClass:"buyednum"},[s._v(s._s(t.sales_sum)+"人付款")])])])])}))]),s._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:s.loadingShow,expression:"loadingShow"}],staticClass:"list_load"},[o("img",{attrs:{src:a("t3LQ")}}),s._v("数据加载中...\n  ")]),s._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:s.noDataShow,expression:"noDataShow"}],staticClass:"list_load"},[s._v("\n    没有更多数据了\n  ")]),s._v(" "),o("pubfooter",{attrs:{indexNum:1}})],1)},staticRenderFns:[]};var h=a("C7Lr")(n,l,!1,function(s){a("cD1A")},null,null);t.default=h.exports}});
//# sourceMappingURL=39.4ff5c35fa1455abce1ca.js.map